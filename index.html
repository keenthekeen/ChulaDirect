<!doctype html>
<html>
<head>
    <!-- Project ChulaDirect: Chulalongkorn University Direct Entrance Score Calculator -->
    <!-- Copyright (C) 2019  Siwat Techavoranant -->
    <!-- https://github.com/keenthekeen/ChulaDirect -->
    <meta charset="UTF-8"/>
    <title>โปรแกรมคำนวณคะแนนรับตรงจุฬาฯ และกสพท. 2562</title>
    <meta property="og:title" content="โปรแกรมคำนวณคะแนนรับตรงจุฬาฯ และกสพท. 2562"/>
    <meta property="og:type" content="website"/>
    <meta property="og:locale" content="th_TH"/>
    <meta property="og:image" content="https://chuladirect.keendev.net/screen.png"/>

    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:title" content="โปรแกรมคำนวณคะแนนรับตรงจุฬาฯ 2562"/>
    <meta name="twitter:image" content="https://chuladirect.keendev.net/screen.png"/>

    <meta name="description" content="โปรแกรมคำนวณคะแนนสำหรับยื่นตรงเข้าจุฬาลงกรณ์มหาวิทยาลัย TCAS รอบ 3"/>
    <meta name="keyword"
          content="คำนวณคะแนน รับตรง จุฬา TCAS รอบ 3 แพทย์ แพทยศาสตร์ วิศวะ วิศวกรรมศาสตร์ รัฐศาสตร์ บัญชี นิเทศ อักษร จิตวิทยา เศรษฐศาสตร์ นิติศาสตร์ สหเวชศาสตร์ วิทยาศาสตร์ กสพท 2562"/>
    <meta name="google" content="notranslate"/>

    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="theme-color" content="#3f51b5"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" integrity="sha256-OweaP/Ic6rsV+lysfyS4h+LM6sRwuO3euTYfr6M124g="
          crossorigin="anonymous"/>
    <link href="app.css" rel="stylesheet"/>
    <style>
        body {
            background-color: #3f51b5;
            animation: fadein 2s;
        }

        @keyframes fadein {
            from {
                background-color: #333;
            }
            to {
                background-color: #3f51b5;
            }
        }

        footer {
            background-color: transparent !important;
        }

        #mainBox {
            max-width: 48rem;
        }
    </style>
</head>

<body>
<main class="container">
    <div class="white-text center-align" style="padding-top:5vh;padding-bottom:4vh;line-height:1.5rem;">
        <h4>คำนวณคะแนนรับตรงจุฬาฯ/กสพท.</h4>
        <h6>(TCAS 2562 รอบ 3)</h6><br/>
        <div class="center-align minibox sector red darken-1 white-text" id="mini-al" style="display:none;font-size:1.3rem;line-height: 2rem;">
            <h4>ระบบไม่สามารถทำงานได้</h4>
            คุณกำลังใช้งานบนอุปกรณ์ที่ไม่เหมาะสม
            <br/> ใช้งานได้ดีที่สุดบน
            <a href="https://firefox.com">Mozilla Firefox</a> หรือ Google Chrome หรือ Safari รุ่นล่าสุด
        </div>
        <div class="z-depth-2 fullwidth grey lighten-5" id="mainBox">
            <p style="margin-top:0">กรุณากรอกคะแนนสอบที่มี จากนั้นเลือกคณะที่ต้องการ แล้วกด "คำนวณ" หรือกด "คะแนนต่ำสุดกสพท." หรือ "ดูแบบหลายคณะ" เพื่อดูคณะที่สามารถยื่นได้แบบหลายคณะพร้อมกัน</p>
            <form>
                <table>
                    <tr>
                        <th>การสอบ</th>
                        <th>คะแนนที่ได้</th>
                    </tr>
                    <tr>
                        <td>GAT</td>
                        <td>
                            <input class="validate" name="continue_score[gat]" id="igat" min="0" max="300" step="0.01" type="number"/>
                        </td>
                    </tr>
                    <tr>
                        <td>PAT1 (คณิต)</td>
                        <td>
                            <input class="validate" name="continue_score[pat1]" id="ipat1" min="0" max="300" step="0.01" type="number"/>
                        </td>
                    </tr>
                    <tr>
                        <td>PAT2 (วิทย์)</td>
                        <td>
                            <input class="validate" name="continue_score[pat2]" id="ipat2" min="0" max="300" step="0.01" type="number"/>
                        </td>
                    </tr>
                    <tr>
                        <td>PAT3 (วิศวกรรม)</td>
                        <td>
                            <input class="validate" name="continue_score[pat3]" id="ipat3" min="0" max="300" step="0.01" type="number"/>
                        </td>
                    </tr>
                    <tr>
                        <td>PAT4 (สถาปัตยกรรม)</td>
                        <td>
                            <input class="validate" name="continue_score[pat4]" id="ipat4" min="0" max="300" step="0.01" type="number"/>
                        </td>
                    </tr>
                    <tr>
                        <td>PAT5 (ครู)</td>
                        <td>
                            <input class="validate" name="continue_score[pat5]" id="ipat5" min="0" max="300" step="0.01" type="number"/>
                        </td>
                    </tr>
                    <!--tr>
                    <td>PAT6 (ศิลปกรรม)</td>
                    <td>
                        <input class="validate" name="continue_score[pat6]" id="ipat6" min="0" max="300" step="0.01" type="number" />
                    </td>
                </tr-->
                    <tr>
                        <td>PAT7 (ภาษาต่างประเทศที่ 2)</td>
                        <td>
                            <input class="validate" name="continue_score[pat7]" id="ipat7" min="0" max="300" step="0.01" type="number"/>
                        </td>
                    </tr>
                    <tr>
                        <td>วิชาสามัญ ภาษาไทย</td>
                        <td>
                            <input class="validate" name="continue_score[btha]" id="ibtha" min="0" max="100" step="0.01" type="number"/>
                        </td>
                    </tr>
                    <tr>
                        <td>วิชาสามัญ สังคมศึกษา</td>
                        <td>
                            <input class="validate" name="continue_score[bsoc]" id="ibsoc" min="0" max="100" step="0.01" type="number"/>
                        </td>
                    </tr>
                    <tr>
                        <td>วิชาสามัญ ภาษาอังกฤษ</td>
                        <td>
                            <input class="validate" name="continue_score[beng]" id="ibeng" min="0" max="100" step="0.01" type="number"/>
                        </td>
                    </tr>
                    <tr>
                        <td>วิชาสามัญ คณิตศาสตร์ 1</td>
                        <td>
                            <input class="validate" name="continue_score[bmat]" id="ibmat" min="0" max="100" step="0.01" type="number"/>
                        </td>
                    </tr>
                    <tr>
                        <td>วิชาสามัญ ฟิสิกส์</td>
                        <td>
                            <input class="validate" name="continue_score[bphy]" id="ibphy" min="0" max="100" step="0.01" type="number"/>
                        </td>
                    </tr>
                    <tr>
                        <td>วิชาสามัญ เคมี</td>
                        <td>
                            <input class="validate" name="continue_score[bchm]" id="ibchm" min="0" max="100" step="0.01" type="number"/>
                        </td>
                    </tr>
                    <tr>
                        <td>วิชาสามัญ ชีววิทยา</td>
                        <td>
                            <input class="validate" name="continue_score[bbio]" id="ibbio" min="0" max="100" step="0.01" type="number"/>
                        </td>
                    </tr>
                    <tr>
                        <td>ความถนัดแพทย์ (เต็ม 30)</td>
                        <td>
                            <input class="validate" name="continue_score[med]" id="imed" min="0" max="30" step="0.0001" type="number"/>
                        </td>
                    </tr>
                </table>
                <br/>
                <br/>
                <div class="divider"></div>
                <br/>
                <br/>
                <div class="row">
                    <div class="input-field col s12">
                        <select disabled>
                            <option value="" disabled selected>จุฬาลงกรณ์มหาวิทยาลัย</option>
                        </select>
                        <label>มหาวิทยาลัย</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12">
                        <select id="iFaculty">
                            <option value="" disabled selected>กำลังโหลด</option>
                        </select>
                        <label>คณะ</label>
                    </div>
                </div>
                <button type="submit" class="waves-effect waves-light btn-large orange fullwidth" id="calculateBtn" disabled>
                    คำนวณ
                </button>
                <div class="sector yellow lighten-2" style="display:none;margin-top:1rem" id="scoreBox">
                    <span>ยื่น<span id="titleText"></span> จุฬาลงกรณ์มหาวิทยาลัย</span><br/>
                    <span id="howText"></span>
                    ได้คะแนนรวม
                    <b id="score"></b> คะแนน<br/>
                    <span id="previousText"></span>
                    <div id="chart_div"></div>
                    <p style="font-size:0.7rem;margin:0">โปรดศึกษาเกณฑ์ขั้นต่ำและเงื่อนไขของแต่ละคณะด้วยตนเอง</p>
                </div>
            </form>
            <br/>
            <br/>
            <div class="divider"></div>
            <br/> อ่านเพิ่มเติม:
            <ul class="browser-default left-align">
                <li>
                    <a class="waves-effect waves-light btn modal-trigger" onclick="viewCotmes()">เทียบกับคะแนนต่ำสุดกสพท. 4 ปีย้อนหลัง</a>
                </li>
                <li>
                    <a class="waves-effect waves-light btn modal-trigger purple" onclick="viewAll()">ดูคณะในจุฬาฯ ที่ยื่นได้ทั้งหมด</a>
                </li>
                <li>
                    <a href="http://www.admissions.chula.ac.th/tcas3.html" target="_blank">รายละเอียด TCAS 2562 รอบ 3 จุฬาฯ</a>
                </li>
                <li>
                    <a href="https://twitter.com/socialdome/status/1002378132098150400" target="_blank" rel="nofollow">คะแนนสูงสุด-ต่ำสุด 2561 (TCAS 3/1)</a>
                </li>
                <li>
                    <a href="https://web.archive.org/web/20180328160426/http://www.atc.chula.ac.th/admission2/pdf2017/Score_DirectAdmissions60.pdf" target="_blank">คะแนนสูงสุด-ต่ำสุด 2560</a>
                </li>
                <li>
                    <a href="https://web.archive.org/web/20180219235905/http://www.atc.chula.ac.th/admission2/Score59.pdf" target="_blank">คะแนนสูงสุด-ต่ำสุด 2559</a>
                </li>
                <li>
                    <a href="https://web.archive.org/web/20180329021259/http://www.atc.chula.ac.th/admission2/Score58.pdf" target="_blank">คะแนนสูงสุด-ต่ำสุด 2558</a>
                </li>
                <li>เว็บไซต์นี้ไม่ได้รวบรวมข้อมูลของทุกคณะ และไม่ได้แสดงเงื่อนไขการสมัครทั้งหมด จึงต้องศึกษาข้อมูลจากประกาศของจุฬาลงกรณ์มหาวิทยาลัยก่อนตัดสินใจเลือก</li>
                <li>ต้องใช้คะแนนสอบของปีล่าสุดเท่านั้น</li>
                <li>ข้อมูลคะแนนปี 2561 อิงจากรอบ 3/1</li>
            </ul>
        </div>
    </div>
</main>

<footer class="page-footer">
    <div class="footer-copyright">
        <div class="container">
            ข้อมูลที่กรอกอาจเก็บไว้ในเครื่องเพื่อดูครั้งต่อไป แต่จะไม่ถูกส่งไปยังเซิร์ฟเวอร์ | <a href="javascript:clearStorage()">ล้างข้อมูล</a> | <a href="https://github.com/keenthekeen/ChulaDirect"
                                                                                                                                                       target="_blank"
                                                                                                                                                       onclick="gtag('event', 'link', 'github');"><img
                src="github.png"/></a>
        </div>
    </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js" integrity="sha256-U/cHDMTIHCeMcvehBv1xQ052bPSbJtbuiw4QA9cTKz0=" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
    google.charts.load('current', {packages: ['corechart']});
</script>
<script>
    var list;
    var fields = ['gat', 'pat1', 'pat2', 'pat3', 'pat4', 'pat5', 'pat7', 'beng', 'bsoc', 'bchm', 'btha', 'bbio', 'bphy', 'bmat', 'med'];
    var fieldName = {
        'gat': 'GAT',
        'pat1': 'PAT1',
        'pat2': 'PAT2',
        'pat3': 'PAT3',
        'pat4': 'PAT4',
        'pat5': 'PAT5',
        'pat7': 'PAT7',
        'beng': 'อังกฤษสามัญ',
        'bsoc': 'สังคมสามัญ',
        'bchm': 'เคมีสามัญ',
        'btha': 'ไทยสามัญ',
        'bbio': 'ชีววิทยาสามัญ',
        'bphy': 'ฟิสิกส์สามัญ',
        'bmat': 'คณิตสามัญ',
        'med': 'ความถนัดแพทย์'
    };
    $(function () {
        var timeLoaded = (new Date()).getTime();
        fetch('chula.json').then(function (response) {
            return response.json();
        }).then(function (data) {
            list = data;

            var options = '';
            for (var i in list) {
                var optionName;
                if ('acceptance' in list[i]) {
                    optionName = list[i].name + ' (รับ ' + list[i].acceptance + ' คน)';
                } else {
                    optionName = list[i].name;
                }
                options += '<option value="' + i + '">' + optionName + '</option>';
            }
            $("#iFaculty").html(options).change();
            $('select').formSelect();
            $('button').attr('disabled', false);
        });
        $("form").submit(function (e) {
            e.preventDefault();
            var faculty = list[$("#iFaculty").val()]["calculate"];
            var score = 0;
            var howText = [];
            var previousText = [];
            var useB = false;
            var bList = ['beng', 'bsoc', 'bchm', 'btha', 'bbio', 'bphy', 'bmat'];
            $("#titleText").text(list[$("#iFaculty").val()]["name"]);
            $("#howText").css("color", "#666");
            for (var i in faculty) {
                score += $("#i" + i).val() * faculty[i];
                if ($("#i" + i).val() <= 0) {
                    M.toast({html: "โปรดกรอกคะแนน " + fieldName[i]});
                    $("#howText").css("color", "red");
                    $("#scoreBox").slideUp();
                    return;
                }
                howText.push(fieldName[i] + " x " + faculty[i]);
                localStorage.setItem(i, $("#i" + i).val());
                if (bList.indexOf(i) != -1) {
                    useB = true;
                }
            }
            $("#score").text(score.toLocaleString('en-US'));
            if ($("#iFaculty").val() == 'medicine' && score > 5) {
                localStorage.setItem('cotmes-all', score);
            }
            $("#howText").html("คำนวณจาก " + howText.join(" + ") + "<br />").show();
            $("#scoreBox").slideDown();
            gtag('event', 'calculate', {
                'faculty': $("#iFaculty").val()
            });
            var previous = list[$("#iFaculty").val()]["previous"];
            if (previous !== undefined) {
                for (var i in previous) {
                    var diff = (score - previous[i]);
                    var diffText;
                    if (Math.abs(diff) < 50) {
                        diffText = diff.toFixed(3);
                    } else {
                        diffText = diff.toFixed(1).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                    }
                    var pt = "คะแนนต่ำสุดปี " + i + ": " + previous[i].toLocaleString('en-US');
                    if (diff >= 0) {
                        pt += " (<span class='green-text'>+" + diffText + "</span>)";
                    } else {
                        pt += " (<span class='red-text'>" + diffText + "</span>)";
                    }
                    previousText.push(pt);
                }
                $("#previousText").html(previousText.join("<br />"));

                if (Object.keys(previous).length === 4) {
                    // Draw graph
                    var data = new google.visualization.DataTable();
                    data.addColumn('string', 'ปี');
                    data.addColumn('number', 'ที่ได้');
                    data.addColumn('number', 'ขั้นต่ำ');
                    var options = {
                        hAxis: {
                            title: 'ปี'
                        },
                        vAxis: {
                            title: 'คะแนน'
                        },
                        animation: {
                            startup: true,
                            duration: 800,
                            easing: 'inAndOut'
                        }
                    };

                    data.addRows([
                        ['2558', score, previous['2558']], ['2559', score, previous['2559']], ['2560', score, previous['2560']], ['2561', score, previous['2561']]
                    ]);

                    var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
                    $("#chart_div").show();
                    chart.draw(data, options);
                } else {
                    $("#chart_div").hide();
                }
            } else {
                $("#previousText").html('');
                $("#chart_div").hide();
            }

            if ((new Date()).getTime() - timeLoaded > 1800000) {
                // If page has been loaded more than 30 minutes ago, reload.
                setTimeout(function () {
                    window.location.reload();
                }, 5000);
            }
        });

        if (localStorage.getItem('gat') || localStorage.getItem('btha')) {
            fields.forEach(function (e) {
                $("#i" + e).val(localStorage.getItem(e));
            });
        }
    });

    function viewCotmes() {
        $("#iFaculty").val('medicine');
        $('select').formSelect();
        $('form').submit();
        window.location.href = "cotmes.html";
    }

    function viewAll() {
        fields.forEach(function (e) {
            localStorage.setItem(e, $("#i" + e).val());
        });
        if (confirm('ได้กรอกคะแนนสอบทุกวิชาที่สอบแล้วใช่หรือไม่')) {
            window.location.href = "table.html";
        } else {
            M.toast({html: 'โปรดกรอกคะแนนสอบให้ครบถ้วนเท่าที่มี'});
        }
    }

    function clearStorage() {
        $("input").val("");
        localStorage.clear();
        location.reload();
    }

    if (!self.fetch) {
        // Check for old browser by checking Fetch API support, which is not present in old browsers.
        // Visit http://caniuse.com for more information
        $('#mini-al').show();

        if (!(typeof Promise !== "undefined" && Promise.toString().indexOf("[native code]") !== -1)) {
            // If Promise API not supported
            setTimeout(function () {
                $('body').css('background-color', '#f44336');
            }, 2000);
            $('.btn-large').removeClass('orange').addClass('grey');
        }
    }

</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-40738950-5"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', 'UA-40738950-5');
</script>
</body>
</html>
